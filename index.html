<!DOCTYPE html>
<html>

<head>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"
        integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o"
        crossorigin="anonymous"></script>
    <title>Humidity</title>
    <script type="text/javascript" src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    <script type="text/javascript">
        window.onload = function () {
            var dataPoints = [];

            function getDataPointsFromCSV(csv) {
                var dataPoints = csvLines = points = [];
                csvLines = csv.split(/[\r?\n|\r|\n]+/);

                for (var i = 0; i < csvLines.length; i++)
                    if (csvLines[i].length > 0) {
                        points = csvLines[i].split(",");
                        dataPoints.push({
                            x: parseFloat(points[1]),
                            y: parseFloat(points[0])
                        });
                    }
                return dataPoints;
            }
            function getDataPointsFromCSV2(csv) {
                var dataPoints = csvLines = points = [];
                csvLines = csv.split(/[\r?\n|\r|\n]+/);

                for (var i = 0; i < csvLines.length; i++)
                    if (csvLines[i].length > 0) {
                        points = csvLines[i].split(",");
                        dataPoints.push({
                            x: parseFloat(points[1]),
                            y: parseFloat(points[2])
                        });
                    }
                return dataPoints;
            }

            function getDataPointsFromCSV3(csv) {
                var dataPoints = csvLines = points = [];
                csvLines = csv.split(/[\r?\n|\r|\n]+/);

                for (var i = 0; i < csvLines.length; i++)
                    if (csvLines[i].length > 0) {
                        points = csvLines[i].split(",");
                        dataPoints.push({
                            x: parseFloat(points[1]),
                            y: parseFloat(points[3])
                        });
                    }
                return dataPoints;
            }

            $.get("http://192.168.1.5/getHumidity", function (data) {
                var chart = new CanvasJS.Chart("chartContainer", {
                    title: {
                        text: "Humidity",
                    },
                    data: [{
                        type: "line",
                        xValueType: "dateTime",
                        dataPoints: getDataPointsFromCSV(data)
                    }]
                });

                chart.render();

            });
            $.get("http://192.168.1.5/getHumidity", function (data) {
                var chart = new CanvasJS.Chart("chartContainer2", {
                    title: {
                        text: "Temperature",
                    },
                    axisY:{
                        minimum:60,
                        maximum:80,
                        interval: 5,
                    },
                    data: [{
                        type: "line",
                        xValueType: "dateTime",
                        dataPoints: getDataPointsFromCSV2(data)
                    }]
                });

                chart.render();

            });

            $.get("http://192.168.1.5/getHumidity", function (data) {
                var chart = new CanvasJS.Chart("chartContainer3", {
                    title: {
                        text: "Pressure",
                    },
                    axisY:{
                        minimum:970,
                        maximum:1030,
                        interval: 10,
                    },
                    data: [{
                        type: "line",
                        xValueType: "dateTime",
                        dataPoints: getDataPointsFromCSV3(data)
                    }]
                });

                chart.render();

            });
        }
    </script>
</head>

<body>
    <h1>Raspberry Pi Weather Dashboard</h1>
    <div class="container">
        <div class="row">
            <div class=col-sm-6>
                    <h1>Current Weather</h1>
                    <b>Temperature</b><p>71.4</p>
                    <b>Pressure</b><p>1002</p>
                    <b>Humidity</b><p>35%</p>
            </div>
            <div class=col-sm-6>
                    <h1>Average Weather</h1>
                    <h2></h2>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4">
                <div id="chartContainer" style="width:100%; height:300px;"></div>
            </div>
            <div class="col-sm-4">
                <div id="chartContainer2" style="width:100%; height:300px;"></div>
            </div>
            <div class="col-sm-4">
                <div id="chartContainer3" style="width:100%; height:300px;"></div>
            </div>
        </div>

    </div>
</body>

</html>